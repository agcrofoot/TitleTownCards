<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    <link rel = "stylesheet" href = "./Resources/CSS/Index.css">
    <title>Title Town Cards</title>
</head>
<body class="text-center">
   <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script type = "text/JavaScript" src = "./Resources/Scripts/Index.js"></script>
    <div class="cover-container d-flex h-100 p-3 mx-auto flex-column">
        <header class="masthead mb-auto">
            <div class="inner text-center">
                <h3 class="masthead-brand" style="font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif">Title Town Cards</h3>
            </div>
        </header>
    
        <form onsubmit = "return false" class="form-signin">
            <h1 class="h3 mb-3 font-weight-normal">Please Enter Your Manager ID</h1>
            <label for="inputManagerID" class="sr-only">Manager ID</label>
            <input type="password" id="inputManagerID" class="form-control" placeholder="ID" required>
            <button class="btn btn-lg btn-secondary btn-block" type="submit" onclick="startGetManager(document.getElementById('inputManagerID').value)">Continue</button>
        </form>
        <script>
            function startGetManager(ID)
            {
                const getManagerApiUrl = "https://title-town-cards-api.herokuapp.com/API/Managers";
                console.log(getManagerApiUrl);
                fetch(getManagerApiUrl).then(function(response){
                    console.log(response);
                    return response.json();
                }).then(function(json){
                    json.forEach((manager)=>{
                        console.log(manager.managerID);
                        console.log(ID);
                        if(ID == manager.managerID)
                        {
                            console.log("went through");
                            console.log(manager.managerName);
                            var para = "?manager=" + manager.managerName;
                            window.location.href = "ManagerView.html" + para;
                        }
                        else
                        {
                            console.log("didn't go through");
                        }
                    });
                }).catch(function(error){
                    console.log(error);
                });
            }
        </script>
    </div>

    <!-- Latest compiled and minified JavaScript -->
    <script src = "https://code.jquery.com/jquery-latest.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>
</html>